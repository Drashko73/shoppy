CREATE TABLE users (ID BIGINT AUTO_INCREMENT NOT NULL, EMAIL VARCHAR(255) NOT NULL UNIQUE, FIRSTNAME VARCHAR(255) NOT NULL, ISADMIN TINYINT(1) default 0 NOT NULL, ISBANNED TINYINT(1) default 0 NOT NULL, LASTNAME VARCHAR(255) NOT NULL, PASSWORD VARCHAR(255) NOT NULL, SESSIONID VARCHAR(255), USERNAME VARCHAR(255) NOT NULL UNIQUE, PRIMARY KEY (ID))
CREATE TABLE categories (ID INTEGER AUTO_INCREMENT NOT NULL, DESCRIPTION VARCHAR(10000) NOT NULL, NAME VARCHAR(255) NOT NULL UNIQUE, PRIMARY KEY (ID))
CREATE TABLE products (ID INTEGER AUTO_INCREMENT NOT NULL, DESCRIPTION VARCHAR(10000) NOT NULL, IMAGE VARCHAR(255), NAME VARCHAR(255) NOT NULL UNIQUE, PRICE DOUBLE NOT NULL, STOCK INTEGER NOT NULL, category_id INTEGER, PRIMARY KEY (ID))
CREATE TABLE cart (ID BIGINT AUTO_INCREMENT NOT NULL, quantity INTEGER NOT NULL, product_id INTEGER, user_id BIGINT, PRIMARY KEY (ID))
CREATE TABLE order_items (ID BIGINT AUTO_INCREMENT NOT NULL, PRICE DOUBLE, QUANTITY INTEGER, order_id BIGINT, product_id INTEGER, PRIMARY KEY (ID))
CREATE TABLE orders (ID BIGINT AUTO_INCREMENT NOT NULL, ORDERDATE DATETIME, TOTALPRICE DOUBLE, user_id BIGINT, PRIMARY KEY (ID))
CREATE TABLE chat_rooms (ID BIGINT AUTO_INCREMENT NOT NULL, description VARCHAR(2000) NOT NULL, name VARCHAR(100) NOT NULL UNIQUE, PRIMARY KEY (ID))
CREATE TABLE chat_messages (ID BIGINT AUTO_INCREMENT NOT NULL, message VARCHAR(2000) NOT NULL, timestamp DATETIME(3) NOT NULL, chat_room_id BIGINT NOT NULL, user_id BIGINT NOT NULL, PRIMARY KEY (ID))
ALTER TABLE products ADD CONSTRAINT FK_products_category_id FOREIGN KEY (category_id) REFERENCES categories (ID)
ALTER TABLE cart ADD CONSTRAINT FK_cart_user_id FOREIGN KEY (user_id) REFERENCES users (ID)
ALTER TABLE cart ADD CONSTRAINT FK_cart_product_id FOREIGN KEY (product_id) REFERENCES products (ID)
ALTER TABLE order_items ADD CONSTRAINT FK_order_items_order_id FOREIGN KEY (order_id) REFERENCES orders (ID)
ALTER TABLE order_items ADD CONSTRAINT FK_order_items_product_id FOREIGN KEY (product_id) REFERENCES products (ID)
ALTER TABLE orders ADD CONSTRAINT FK_orders_user_id FOREIGN KEY (user_id) REFERENCES users (ID)
ALTER TABLE chat_messages ADD CONSTRAINT FK_chat_messages_user_id FOREIGN KEY (user_id) REFERENCES users (ID)
ALTER TABLE chat_messages ADD CONSTRAINT FK_chat_messages_chat_room_id FOREIGN KEY (chat_room_id) REFERENCES chat_rooms (ID)
